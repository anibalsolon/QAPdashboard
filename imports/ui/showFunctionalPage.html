<template name="showFunctionalPage">
<div id="showFunctionalPageDiv" class="container">

<h1></h1>
<h2>Mean Functional Image and Derivatives - {{ subjectId }}  </h2>
<p>This is the functional preprocessed image and the derivatives created by the workflow. 
    They can be used to eyeball the quality of the functional scan and check the derivatives.</p>
    <p>All derivatives are described in the <a href="http://preprocessed-connectomes-project.org/quality-assessment-protocol/#temporal-functional">QAP documentation</a>.</p>
  <div class="row">
    <div class="text-left">
      <input id="showSfs" type="checkbox" name="sfsCb" value="showSfs" checked> Signal Fluctuation Sensitivity
      <input id="showTstd" type="checkbox" name="tstdCb" value="showTstd" checked> Temporal STD Map
      <input id="showEn" type="checkbox" name="enCb" value="showEn" checked> Nuisance Voxels
      <input id="showGp" type="checkbox" name="gpCb" value="showGp" checked> Gray Plot Cluster
    </div>
    <div id="funcImageDisplay" class="text-left"></div>
  </div>

  <h2>Gray Plot</h2>
  <p>The Gray Plot is a simple way to assess functional scan quality.
    It displays the voxels time series. Unwanted signals can be spotted by vertical lines in the plot. Most of the time, Mean FD, DVARS and Global Signal fluctuations are related with the vertical lines in the grayplot.  
    The voxels were rearranged in 10 clusters. You can check the clusters location turning on the Gray Plot option above.</p>
    <p>Adapted from <a href="http://www.sciencedirect.com/science/article/pii/S1053811916303871">JD Power - â€Ž2016</a>.</p>
  <div>
    <img src="{{grayplotImg}}" height="auto" width="100%">
  </div>

  <h2>QAP Functional Spatial Measures</h2>
  <span>The spatial metrics computed on the functional scan are displayed as boxplots. The <div id="circle" class="inline"></div> in these plots denote where the score for the scans for this
participant fall in the distribution of all scores for scans that were included as inputs to the functional-spatial workflow.</span>

  <p>
  <br>
  The metrics computed are as follows:
    <ul>
      <li> <strong>EFC</strong> - Entropy Focus Criterion</li>
      <li> <strong>FBER</strong> - Foreground to Background Energy Ratio</li>
      <li><strong>FWHM</strong> - Full-width half maximum smoothness of the voxels averaged across the three coordinate axes, and also for each axis [x,y,x]</li>
      <li> <strong>Ghost</strong> - Ghost to Signal Ratio</li>
      <li><strong>SNR</strong> - Signal to Noise Ratio</li>
    </ul>
    <p>All metrics are described in more detail in the <a href="http://preprocessed-connectomes-project.org/quality-assessment-protocol/#spatial-functional">QAP documentation</a>.</p>
  </p>
  <div id="boxplotSpatialContainer" class="row text-center">
    <div class="col inline"><svg id="funcBoxplotEFC" width="90%" height="450px"></svg></div>
    <div class="col inline"><svg id="funcBoxplotFBER" width="90%" height="450px"></svg></div>
    <div class="col inline"><svg id="funcBoxplotFWHM" width="90%" height="450px"></svg></div>
    <div class="col inline"><svg id="funcBoxplotSNR" width="90%" height="450px"></svg></div>
    <div class="col inline"><svg id="funcBoxplotGhost_y" width="90%" height="450px"></svg></div>
  </div>

  <h2>QAP Functional Temporal Measures</h2>
  <span>The temporal metrics computed on the functional scan are displayed as boxplots. The <div id="circle" class="inline"></div> in these plots denote where the score for the scans for this
participant fall in the distribution of all scores for scans that were included as inputs to the functional-temporal workflow.</span>

  <p>
  <br>
  The metrics computed are as follows:
    <ul>
      <li> <strong>GCOR</strong> - Global Correlation</li>
      <li> <strong>SFS</strong> - Signal Fluctuation Sensitivity</li>
      <li><strong>DVARS</strong> - TODO</li>
      <li> <strong>RMSD</strong> - TODO</li>
      <li><strong>Quality</strong> - Median Distance index</li>
      <li><strong>Fraction of OOB Outliers</strong> - TODO</li>
    </ul>
    <p>All metrics are described in more detail in the <a href="http://preprocessed-connectomes-project.org/quality-assessment-protocol/#temporal-functional">QAP documentation</a>.</p>
  </p>
  <div id="boxplotTemporalContainer" class="row text-center">
    <div class="col inline"><svg id="funcBoxplotGCOR" width="90%" height="450px"></svg></div>
    <div class="col inline"><svg id="funcBoxplotSFS" width="90%" height="450px"></svg></div>
    <div class="col inline"><svg id="funcBoxplotDVARS" width="90%" height="450px"></svg></div>
    <div class="col inline"><svg id="funcBoxplotRMSD" width="90%" height="450px"></svg></div>
    <div class="col inline"><svg id="funcBoxplotQuality" width="90%" height="450px"></svg></div>
    <div class="col inline"><svg id="funcBoxplotFOO" width="90%" height="450px"></svg></div>
  </div>

  <div class="nopaddingleft">
    <h2>Header Info</h2>
    <div class="col-md-2"><strong>TR: </strong> </div> <div class="col-md-4"> {{tr}} </div>
    <div class="col-md-2"><strong>Aquisition Date: </strong></div> <div class="col-md-4">  {{aqc_date}}  </div>
    <div class="col-md-2"><strong>Voxel Dimension: </strong></div> <div class="col-md-4">  {{pix_dim}}  </div>
    <div class="col-md-2"><strong>Bitpix: </strong></div> <div class="col-md-4">  {{bitpix}}  </div>
    <div class="col-md-2"><strong>extension: </strong></div> <div class="col-md-4"> {{extension}}  </div>
    <div class="col-md-2"><strong>slc slope: </strong></div> <div class="col-md-4">  {{slc_slope}}  </div>
    <div class="col-md-2"><strong>quatern: </strong></div> <div class="col-md-4">  {{quatern}}  </div>
    <div class="col-md-2"><strong>slc intern: </strong></div> <div class="col-md-4">  {{slc_inter}}  </div>
    <div class="col-md-2"><strong>sform code: </strong></div> <div class="col-md-4">  {{slice_code}}  </div>
    <div class="col-md-2"><strong>slice code: </strong></div> <div class="col-md-4">  {{slice_code}}  </div>
    <div class="col-md-2"><strong>qform code: </strong></div> <div class="col-md-4">  {{qform_code}}  </div>
    <div class="col-md-2"><strong>slice start: </strong></div> <div class="col-md-4">  {{slice_start}}  </div>
    <div class="col-md-2"><strong>q offset: </strong></div> <div class="col-md-4">  {{qoffset}}  </div>
    <div class="col-md-2"><strong>slice end: </strong></div> <div class="col-md-4">  {{slice_end}}  </div>
    <div class="col-md-2"><strong>srow x: </strong></div> <div class="col-md-4">  {{srow_x}}  </div>
    <div class="col-md-2"><strong>slice duration: </strong></div> <div class="col-md-4">  {{slice_duration}}  </div>
    <div class="col-md-2"><strong>srow y: </strong></div> <div class="col-md-4">  {{srow_y}}  </div>
    <div class="col-md-2"><strong>toffset: </strong></div> <div class="col-md-4">  {{toffset}}  </div>
    <div class="col-md-2"><strong>srow z: </strong></div> <div class="col-md-4">  {{srow_z}}  </div>
    <div class="col-md-2"><strong>Aux File: </strong></div> <div class="col-md-4">  {{aux_file}}  </div>
  </div>
</div>
 <!-- I'm so lazy --><br/><br/>
</template>